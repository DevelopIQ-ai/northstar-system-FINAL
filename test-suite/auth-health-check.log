2025-06-23 13:50:47,105 - __main__ - INFO - üè• Starting comprehensive authentication health check
2025-06-23 13:50:47,105 - __main__ - INFO - ============================================================
2025-06-23 13:50:47,105 - __main__ - INFO - üîç Test 1: Environment Variable Validation
2025-06-23 13:50:47,105 - __main__ - INFO -    ‚úÖ All required environment variables are present
2025-06-23 13:50:47,105 - __main__ - INFO - üîç Test 2: Token Manager Creation
2025-06-23 13:50:47,105 - __main__ - INFO -    ‚úÖ Microsoft Graph token manager created successfully
2025-06-23 13:50:47,105 - __main__ - INFO -    ‚úÖ BuildingConnected token manager created successfully
2025-06-23 13:50:47,106 - __main__ - INFO - üîç Test 3: Token Decryption
2025-06-23 13:50:47,115 - __main__ - INFO -    ‚úÖ Microsoft Graph refresh token decrypted successfully
2025-06-23 13:50:47,115 - __main__ - INFO -    ‚úÖ BuildingConnected refresh token decrypted successfully
2025-06-23 13:50:47,115 - __main__ - INFO - üîç Test 4: Token Refresh
2025-06-23 13:50:47,650 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:50:47,659 - __main__ - INFO -    ‚úÖ Microsoft Graph access token refreshed successfully
2025-06-23 13:50:47,915 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 200 OK"
2025-06-23 13:50:47,922 - __main__ - INFO -    ‚úÖ BuildingConnected access token refreshed successfully
2025-06-23 13:50:47,922 - __main__ - INFO - üîç Test 5: API Client Creation
2025-06-23 13:50:47,922 - __main__ - INFO -    ‚úÖ Microsoft Graph client created successfully
2025-06-23 13:50:47,922 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:50:47,922 - __main__ - INFO -    ‚úÖ BuildingConnected client created successfully
2025-06-23 13:50:47,922 - __main__ - INFO - üîç Test 6: Authentication Endpoint Validation
2025-06-23 13:50:48,438 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:50:48,640 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:50:48,641 - __main__ - INFO -    ‚úÖ Microsoft Graph API call successful
2025-06-23 13:50:48,641 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:50:48,641 - clients.buildingconnected_client - INFO - üë§ Getting user information
2025-06-23 13:50:48,882 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:50:48,885 - clients.buildingconnected_client - ERROR - ‚ùå General error in get_user_info: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:50:48,886 - __main__ - ERROR -    ‚ùå BuildingConnected API issue: User not authenticated or invalid response: id=None email=None name=None company=None authenticated=False
2025-06-23 13:50:48,886 - __main__ - INFO - üîç Test 7: Token Expiration Scenarios
2025-06-23 13:50:49,283 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:50:49,285 - __main__ - INFO -    ‚úÖ Microsoft Graph token expires in 60.0 minutes
2025-06-23 13:50:49,484 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:50:49,485 - __main__ - ERROR -    ‚ùå Token expiration check failed: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:50:49,485 - __main__ - INFO - üîç Test 8: Rate Limiting Resilience
2025-06-23 13:50:50,091 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:50:50,250 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:50:50,376 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:50:50,531 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:50:50,532 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:50:50,532 - clients.buildingconnected_client - INFO - üë§ Getting user information
2025-06-23 13:50:50,732 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:50:50,732 - clients.buildingconnected_client - ERROR - ‚ùå General error in get_user_info: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:50:50,733 - clients.buildingconnected_client - INFO - üë§ Getting user information
2025-06-23 13:50:50,935 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:50:50,936 - clients.buildingconnected_client - ERROR - ‚ùå General error in get_user_info: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:50:50,936 - __main__ - INFO -    ‚úÖ Rate limiting tests completed successfully
2025-06-23 13:50:50,936 - __main__ - INFO - üîç Test 9: Network Resilience
2025-06-23 13:50:51,106 - httpx - INFO - HTTP Request: GET https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:50:51,107 - __main__ - INFO -    ‚úÖ Microsoft Token Endpoint: 200 (164ms)
2025-06-23 13:50:51,186 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/ "HTTP/1.1 200 OK"
2025-06-23 13:50:51,187 - __main__ - INFO -    ‚úÖ Microsoft Graph API: 200 (79ms)
2025-06-23 13:50:51,288 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 404 Not Found"
2025-06-23 13:50:51,288 - __main__ - INFO -    ‚úÖ Autodesk Token Endpoint: 404 (100ms)
2025-06-23 13:50:51,339 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/ "HTTP/1.1 404 Not Found"
2025-06-23 13:50:51,339 - __main__ - INFO -    ‚úÖ BuildingConnected API: 404 (50ms)
2025-06-23 13:52:49,839 - __main__ - INFO - üè• Starting comprehensive authentication health check
2025-06-23 13:52:49,839 - __main__ - INFO - ============================================================
2025-06-23 13:52:49,839 - __main__ - INFO - üîç Test 1: Environment Variable Validation
2025-06-23 13:52:49,839 - __main__ - INFO -    ‚úÖ All required environment variables are present
2025-06-23 13:52:49,839 - __main__ - INFO - üîç Test 2: Token Manager Creation
2025-06-23 13:52:49,839 - __main__ - INFO -    ‚úÖ Microsoft Graph token manager created successfully
2025-06-23 13:52:49,839 - __main__ - INFO -    ‚úÖ BuildingConnected token manager created successfully
2025-06-23 13:52:49,839 - __main__ - INFO - üîç Test 3: Token Decryption
2025-06-23 13:52:49,849 - __main__ - INFO -    ‚úÖ Microsoft Graph refresh token decrypted successfully
2025-06-23 13:52:49,849 - __main__ - INFO -    ‚úÖ BuildingConnected refresh token decrypted successfully
2025-06-23 13:52:49,849 - __main__ - INFO - üîç Test 4: Token Refresh
2025-06-23 13:52:50,274 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:52:50,285 - __main__ - INFO -    ‚úÖ Microsoft Graph access token refreshed successfully
2025-06-23 13:52:50,549 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 200 OK"
2025-06-23 13:52:50,553 - __main__ - INFO -    ‚úÖ BuildingConnected access token refreshed successfully
2025-06-23 13:52:50,553 - __main__ - INFO - üîç Test 5: API Client Creation
2025-06-23 13:52:50,553 - __main__ - INFO -    ‚úÖ Microsoft Graph client created successfully
2025-06-23 13:52:50,553 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:52:50,553 - __main__ - INFO -    ‚úÖ BuildingConnected client created successfully
2025-06-23 13:52:50,553 - __main__ - INFO - üîç Test 6: Authentication Endpoint Validation
2025-06-23 13:52:51,129 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:52:51,294 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:52:51,295 - __main__ - INFO -    ‚úÖ Microsoft Graph API call successful
2025-06-23 13:52:51,295 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:52:51,295 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 13:52:51,509 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:52:51,510 - __main__ - ERROR -    ‚ùå BuildingConnected API call failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:52:51,510 - __main__ - INFO - üîç Test 7: Token Expiration Scenarios
2025-06-23 13:52:51,945 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:52:51,947 - __main__ - INFO -    ‚úÖ Microsoft Graph token expires in 60.0 minutes
2025-06-23 13:52:52,139 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:52:52,139 - __main__ - ERROR -    ‚ùå Token expiration check failed: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:52:52,140 - __main__ - INFO - üîç Test 8: Rate Limiting Resilience
2025-06-23 13:52:52,470 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:52:52,637 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:52:52,787 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:52:52,943 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 13:52:52,944 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 13:52:52,945 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 13:52:53,146 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 13:52:53,147 - __main__ - ERROR -    ‚ùå Rate limiting test failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 13:52:53,147 - __main__ - INFO - üîç Test 9: Network Resilience
2025-06-23 13:52:53,318 - httpx - INFO - HTTP Request: GET https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 13:52:53,319 - __main__ - INFO -    ‚úÖ Microsoft Token Endpoint: 200 (161ms)
2025-06-23 13:52:53,402 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/ "HTTP/1.1 200 OK"
2025-06-23 13:52:53,404 - __main__ - INFO -    ‚úÖ Microsoft Graph API: 200 (84ms)
2025-06-23 13:52:53,500 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 404 Not Found"
2025-06-23 13:52:53,502 - __main__ - INFO -    ‚úÖ Autodesk Token Endpoint: 404 (97ms)
2025-06-23 13:52:53,546 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/ "HTTP/1.1 404 Not Found"
2025-06-23 13:52:53,546 - __main__ - INFO -    ‚úÖ BuildingConnected API: 404 (43ms)
2025-06-23 14:07:56,558 - __main__ - INFO - üè• Starting comprehensive authentication health check
2025-06-23 14:07:56,558 - __main__ - INFO - ============================================================
2025-06-23 14:07:56,558 - __main__ - INFO - üîç Test 1: Environment Variable Validation
2025-06-23 14:07:56,558 - __main__ - INFO -    ‚úÖ All required environment variables are present
2025-06-23 14:07:56,558 - __main__ - INFO - üîç Test 2: Token Manager Creation
2025-06-23 14:07:56,558 - __main__ - INFO -    ‚úÖ Microsoft Graph token manager created successfully
2025-06-23 14:07:56,558 - __main__ - INFO -    ‚úÖ BuildingConnected token manager created successfully
2025-06-23 14:07:56,558 - __main__ - INFO - üîç Test 3: Token Decryption
2025-06-23 14:07:56,571 - __main__ - INFO -    ‚úÖ Microsoft Graph refresh token decrypted successfully
2025-06-23 14:07:56,571 - __main__ - INFO -    ‚úÖ BuildingConnected refresh token decrypted successfully
2025-06-23 14:07:56,571 - __main__ - INFO - üîç Test 4: Token Refresh
2025-06-23 14:07:57,217 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:07:57,230 - __main__ - INFO -    ‚úÖ Microsoft Graph access token refreshed successfully
2025-06-23 14:07:57,488 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 200 OK"
2025-06-23 14:07:57,491 - __main__ - INFO -    ‚úÖ BuildingConnected access token refreshed successfully
2025-06-23 14:07:57,492 - __main__ - INFO - üîç Test 5: API Client Creation
2025-06-23 14:07:57,492 - __main__ - INFO -    ‚úÖ Microsoft Graph client created successfully
2025-06-23 14:07:57,492 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:07:57,492 - __main__ - INFO -    ‚úÖ BuildingConnected client created successfully
2025-06-23 14:07:57,492 - __main__ - INFO - üîç Test 6: Authentication Endpoint Validation
2025-06-23 14:07:58,146 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:07:58,395 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:07:58,397 - __main__ - INFO -    ‚úÖ Microsoft Graph API call successful
2025-06-23 14:07:58,397 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:07:58,397 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:07:58,638 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:07:58,639 - __main__ - ERROR -    ‚ùå BuildingConnected API call failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:07:58,639 - __main__ - INFO - üîç Test 7: Token Expiration Scenarios
2025-06-23 14:07:59,304 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:07:59,309 - __main__ - INFO -    ‚úÖ Microsoft Graph token expires in 60.0 minutes
2025-06-23 14:07:59,510 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:07:59,511 - __main__ - ERROR -    ‚ùå Token expiration check failed: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:07:59,511 - __main__ - INFO - üîç Test 8: Rate Limiting Resilience
2025-06-23 14:08:00,214 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:08:00,348 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:08:00,483 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:08:00,611 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:08:00,612 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:08:00,612 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:08:00,816 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:08:00,816 - __main__ - ERROR -    ‚ùå Rate limiting test failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:08:00,816 - __main__ - INFO - üîç Test 9: Network Resilience
2025-06-23 14:08:01,218 - httpx - INFO - HTTP Request: GET https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:08:01,218 - __main__ - INFO -    ‚úÖ Microsoft Token Endpoint: 200 (392ms)
2025-06-23 14:08:01,295 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/ "HTTP/1.1 200 OK"
2025-06-23 14:08:01,295 - __main__ - INFO -    ‚úÖ Microsoft Graph API: 200 (76ms)
2025-06-23 14:08:01,390 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 404 Not Found"
2025-06-23 14:08:01,391 - __main__ - INFO -    ‚úÖ Autodesk Token Endpoint: 404 (95ms)
2025-06-23 14:08:01,444 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/ "HTTP/1.1 404 Not Found"
2025-06-23 14:08:01,444 - __main__ - INFO -    ‚úÖ BuildingConnected API: 404 (53ms)
2025-06-23 14:11:11,917 - __main__ - INFO - üè• Starting comprehensive authentication health check
2025-06-23 14:11:11,917 - __main__ - INFO - ============================================================
2025-06-23 14:11:11,917 - __main__ - INFO - üîç Test 1: Environment Variable Validation
2025-06-23 14:11:11,917 - __main__ - INFO -    ‚úÖ All required environment variables are present
2025-06-23 14:11:11,917 - __main__ - INFO - üîç Test 2: Token Manager Creation
2025-06-23 14:11:11,917 - __main__ - INFO -    ‚úÖ Microsoft Graph token manager created successfully
2025-06-23 14:11:11,917 - __main__ - INFO -    ‚úÖ BuildingConnected token manager created successfully
2025-06-23 14:11:11,917 - __main__ - INFO - üîç Test 3: Token Decryption
2025-06-23 14:11:11,926 - __main__ - INFO -    ‚úÖ Microsoft Graph refresh token decrypted successfully
2025-06-23 14:11:11,926 - __main__ - INFO -    ‚úÖ BuildingConnected refresh token decrypted successfully
2025-06-23 14:11:11,926 - __main__ - INFO - üîç Test 4: Token Refresh
2025-06-23 14:11:12,432 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:11:12,442 - __main__ - INFO -    ‚úÖ Microsoft Graph access token refreshed successfully
2025-06-23 14:11:12,701 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 200 OK"
2025-06-23 14:11:12,705 - __main__ - INFO -    ‚úÖ BuildingConnected access token refreshed successfully
2025-06-23 14:11:12,705 - __main__ - INFO - üîç Test 5: API Client Creation
2025-06-23 14:11:12,705 - __main__ - INFO -    ‚úÖ Microsoft Graph client created successfully
2025-06-23 14:11:12,705 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:11:12,705 - __main__ - INFO -    ‚úÖ BuildingConnected client created successfully
2025-06-23 14:11:12,705 - __main__ - INFO - üîç Test 6: Authentication Endpoint Validation
2025-06-23 14:11:13,175 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:11:13,348 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:11:13,349 - __main__ - INFO -    ‚úÖ Microsoft Graph API call successful
2025-06-23 14:11:13,349 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:11:13,349 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:11:13,572 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:11:13,573 - __main__ - ERROR -    ‚ùå BuildingConnected API call failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:11:13,573 - __main__ - INFO - üîç Test 7: Token Expiration Scenarios
2025-06-23 14:11:13,974 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:11:13,976 - __main__ - INFO -    ‚úÖ Microsoft Graph token expires in 60.0 minutes
2025-06-23 14:11:14,172 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:11:14,173 - __main__ - ERROR -    ‚ùå Token expiration check failed: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:11:14,173 - __main__ - INFO - üîç Test 8: Rate Limiting Resilience
2025-06-23 14:11:14,486 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:11:14,640 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:11:14,770 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:11:14,894 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:11:14,896 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:11:14,896 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:11:15,167 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 400 Bad Request"
2025-06-23 14:11:15,168 - __main__ - ERROR -    ‚ùå Rate limiting test failed: BuildingConnected API Error 500: Unexpected error getting projects: Token refresh failed: 400 - {"error":"invalid_grant","error_description":"The refresh token is invalid or expired."}

2025-06-23 14:11:15,169 - __main__ - INFO - üîç Test 9: Network Resilience
2025-06-23 14:11:15,324 - httpx - INFO - HTTP Request: GET https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:11:15,325 - __main__ - INFO -    ‚úÖ Microsoft Token Endpoint: 200 (147ms)
2025-06-23 14:11:15,406 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/ "HTTP/1.1 200 OK"
2025-06-23 14:11:15,407 - __main__ - INFO -    ‚úÖ Microsoft Graph API: 200 (81ms)
2025-06-23 14:11:15,501 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 404 Not Found"
2025-06-23 14:11:15,502 - __main__ - INFO -    ‚úÖ Autodesk Token Endpoint: 404 (94ms)
2025-06-23 14:11:15,551 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/ "HTTP/1.1 404 Not Found"
2025-06-23 14:11:15,551 - __main__ - INFO -    ‚úÖ BuildingConnected API: 404 (49ms)
2025-06-23 14:14:39,519 - __main__ - INFO - üè• Starting comprehensive authentication health check
2025-06-23 14:14:39,519 - __main__ - INFO - ============================================================
2025-06-23 14:14:39,519 - __main__ - INFO - üîç Test 1: Environment Variable Validation
2025-06-23 14:14:39,519 - __main__ - INFO -    ‚úÖ All required environment variables are present
2025-06-23 14:14:39,519 - __main__ - INFO - üîç Test 2: Token Manager Creation
2025-06-23 14:14:39,519 - __main__ - INFO -    ‚úÖ Microsoft Graph token manager created successfully
2025-06-23 14:14:39,519 - __main__ - INFO -    ‚úÖ BuildingConnected token manager created successfully
2025-06-23 14:14:39,519 - __main__ - INFO - üîç Test 3: Token Decryption
2025-06-23 14:14:39,532 - __main__ - INFO -    ‚úÖ Microsoft Graph refresh token decrypted successfully
2025-06-23 14:14:39,532 - __main__ - INFO -    ‚úÖ BuildingConnected refresh token decrypted successfully
2025-06-23 14:14:39,532 - __main__ - INFO - üîç Test 4: Token Refresh
2025-06-23 14:14:40,078 - httpx - INFO - HTTP Request: POST https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:14:40,093 - __main__ - INFO -    ‚úÖ Microsoft Graph access token refreshed successfully
2025-06-23 14:14:40,333 - httpx - INFO - HTTP Request: POST https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 200 OK"
2025-06-23 14:14:40,337 - __main__ - INFO -    ‚úÖ BuildingConnected access token refreshed successfully
2025-06-23 14:14:40,337 - __main__ - INFO - üîç Test 5: API Client Creation
2025-06-23 14:14:40,337 - __main__ - INFO -    ‚úÖ Microsoft Graph client created successfully
2025-06-23 14:14:40,337 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:14:40,337 - __main__ - INFO -    ‚úÖ BuildingConnected client created successfully
2025-06-23 14:14:40,337 - __main__ - INFO - üîç Test 6: Authentication Endpoint Validation
2025-06-23 14:14:40,516 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:14:40,518 - __main__ - INFO -    ‚úÖ Microsoft Graph API call successful
2025-06-23 14:14:40,518 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:14:40,519 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:14:40,519 - clients.buildingconnected_client - INFO - üîó API Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects
2025-06-23 14:14:41,410 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects?limit=1 "HTTP/1.1 200 OK"
2025-06-23 14:14:41,411 - clients.buildingconnected_client - INFO - üì° Response: 200 OK
2025-06-23 14:14:41,412 - clients.buildingconnected_client - INFO - üìã Processing 1 projects from API
2025-06-23 14:14:41,412 - clients.buildingconnected_client - INFO - ‚úÖ Retrieved 1 projects
2025-06-23 14:14:41,412 - __main__ - INFO -    ‚úÖ BuildingConnected API call successful (1 projects found)
2025-06-23 14:14:41,412 - __main__ - INFO - üîç Test 7: Token Expiration Scenarios
2025-06-23 14:14:41,412 - __main__ - INFO -    ‚úÖ Microsoft Graph token expires in 60.0 minutes
2025-06-23 14:14:41,412 - __main__ - INFO -    ‚úÖ BuildingConnected token expires in 73.0 minutes
2025-06-23 14:14:41,412 - __main__ - INFO - üîç Test 8: Rate Limiting Resilience
2025-06-23 14:14:41,551 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:14:41,754 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:14:41,911 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/me/mailFolders/inbox/messages?%24top=1&%24select=id%2Csubject%2Cfrom%2CreceivedDateTime%2ChasAttachments&%24orderby=receivedDateTime+desc "HTTP/1.1 200 OK"
2025-06-23 14:14:41,913 - clients.buildingconnected_client - INFO - BuildingConnectedClient initialized with base URL: https://developer.api.autodesk.com/construction/buildingconnected/v2
2025-06-23 14:14:41,914 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:14:41,914 - clients.buildingconnected_client - INFO - üîó API Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects
2025-06-23 14:14:42,324 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects?limit=1 "HTTP/1.1 200 OK"
2025-06-23 14:14:42,325 - clients.buildingconnected_client - INFO - üì° Response: 200 OK
2025-06-23 14:14:42,325 - clients.buildingconnected_client - INFO - üìã Processing 1 projects from API
2025-06-23 14:14:42,325 - clients.buildingconnected_client - INFO - ‚úÖ Retrieved 1 projects
2025-06-23 14:14:42,326 - clients.buildingconnected_client - INFO - üìã Getting all projects (limit: 1)
2025-06-23 14:14:42,326 - clients.buildingconnected_client - INFO - üîó API Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects
2025-06-23 14:14:42,801 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/projects?limit=1 "HTTP/1.1 200 OK"
2025-06-23 14:14:42,803 - clients.buildingconnected_client - INFO - üì° Response: 200 OK
2025-06-23 14:14:42,803 - clients.buildingconnected_client - INFO - üìã Processing 1 projects from API
2025-06-23 14:14:42,803 - clients.buildingconnected_client - INFO - ‚úÖ Retrieved 1 projects
2025-06-23 14:14:42,804 - __main__ - INFO -    ‚úÖ Rate limiting tests completed successfully
2025-06-23 14:14:42,804 - __main__ - INFO - üîç Test 9: Network Resilience
2025-06-23 14:14:43,004 - httpx - INFO - HTTP Request: GET https://login.microsoftonline.com/common/oauth2/v2.0/token "HTTP/1.1 200 OK"
2025-06-23 14:14:43,005 - __main__ - INFO -    ‚úÖ Microsoft Token Endpoint: 200 (192ms)
2025-06-23 14:14:43,079 - httpx - INFO - HTTP Request: GET https://graph.microsoft.com/v1.0/ "HTTP/1.1 200 OK"
2025-06-23 14:14:43,080 - __main__ - INFO -    ‚úÖ Microsoft Graph API: 200 (74ms)
2025-06-23 14:14:43,176 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/authentication/v2/token "HTTP/1.1 404 Not Found"
2025-06-23 14:14:43,177 - __main__ - INFO -    ‚úÖ Autodesk Token Endpoint: 404 (96ms)
2025-06-23 14:14:43,231 - httpx - INFO - HTTP Request: GET https://developer.api.autodesk.com/construction/buildingconnected/v2/ "HTTP/1.1 404 Not Found"
2025-06-23 14:14:43,232 - __main__ - INFO -    ‚úÖ BuildingConnected API: 404 (54ms)
